(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0956cbfb","chunk-5511d808"],{1276:function(e,t,r){"use strict";var o=r("d784"),a=r("44e7"),n=r("825a"),i=r("1d80"),s=r("4840"),c=r("8aa5"),l=r("50c4"),u=r("14c3"),p=r("9263"),d=r("d039"),m=[].push,f=Math.min,h=4294967295,_=!d((function(){return!RegExp(h,"y")}));o("split",2,(function(e,t,r){var o;return o="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,r){var o=String(i(this)),n=void 0===r?h:r>>>0;if(0===n)return[];if(void 0===e)return[o];if(!a(e))return t.call(o,e,n);var s,c,l,u=[],d=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,_=new RegExp(e.source,d+"g");while(s=p.call(_,o)){if(c=_.lastIndex,c>f&&(u.push(o.slice(f,s.index)),s.length>1&&s.index<o.length&&m.apply(u,s.slice(1)),l=s[0].length,f=c,u.length>=n))break;_.lastIndex===s.index&&_.lastIndex++}return f===o.length?!l&&_.test("")||u.push(""):u.push(o.slice(f)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(e,r){return void 0===e&&0===r?[]:t.call(this,e,r)}:t,[function(t,r){var a=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,a,r):o.call(String(a),t,r)},function(e,a){var i=r(o,e,this,a,o!==t);if(i.done)return i.value;var p=n(e),d=String(this),m=s(p,RegExp),b=p.unicode,g=(p.ignoreCase?"i":"")+(p.multiline?"m":"")+(p.unicode?"u":"")+(_?"y":"g"),v=new m(_?p:"^(?:"+p.source+")",g),y=void 0===a?h:a>>>0;if(0===y)return[];if(0===d.length)return null===u(v,d)?[d]:[];var k=0,x=0,F=[];while(x<d.length){v.lastIndex=_?x:0;var C,S=u(v,_?d:d.slice(x));if(null===S||(C=f(l(v.lastIndex+(_?0:x)),d.length))===k)x=c(d,x,b);else{if(F.push(d.slice(k,x)),F.length===y)return F;for(var w=1;w<=S.length-1;w++)if(F.push(S[w]),F.length===y)return F;x=k=C}}return F.push(d.slice(k)),F}]}),!_)},1610:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"f",(function(){return n})),r.d(t,"b",(function(){return i})),r.d(t,"h",(function(){return s})),r.d(t,"e",(function(){return c})),r.d(t,"d",(function(){return l})),r.d(t,"i",(function(){return u})),r.d(t,"g",(function(){return p})),r.d(t,"j",(function(){return d})),r.d(t,"c",(function(){return m}));var o=r("b775");function a(e){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"add.goods.attribute.body.item"},data:e})}function n(e){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"set.goods.attribute.body.item"},data:e})}function i(e){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"add.goods.attribute.item"},data:e})}function s(e){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"set.goods.attribute.item"},data:e})}function c(e){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"get.goods.attribute.page"},data:e})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"get.goods.attribute.list"},data:{goods_type_id:e,attribute_all:t}})}function u(e,t){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"set.goods.attribute.key"},data:{goods_attribute_id:e,attr_index:t}})}function p(e,t){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"set.goods.attribute.important"},data:{goods_attribute_id:e,is_important:t}})}function d(e,t){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"set.goods.attribute.sort"},data:{goods_attribute_id:e,sort:t}})}function m(e){return Object(o["a"])({url:"/v1/goods_attribute",method:"post",params:{method:"del.goods.attribute.list"},data:{goods_attribute_id:e}})}},"2e27":function(e,t,r){"use strict";var o=r("3558"),a=r.n(o);a.a},3558:function(e,t,r){},"498a":function(e,t,r){"use strict";var o=r("23e7"),a=r("58a8").trim,n=r("e070");o({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},a2a9:function(e,t,r){"use strict";r.d(t,"g",(function(){return a})),r.d(t,"b",(function(){return n})),r.d(t,"k",(function(){return i})),r.d(t,"j",(function(){return s})),r.d(t,"i",(function(){return c})),r.d(t,"l",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"c",(function(){return p})),r.d(t,"h",(function(){return d})),r.d(t,"a",(function(){return m})),r.d(t,"d",(function(){return f})),r.d(t,"e",(function(){return h}));var o=r("b775");function a(e){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"set.goods.item"},data:e})}function n(e,t){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"del.goods.list"},data:{goods_id:e,is_delete:t}})}function i(e,t){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"set.recommend.goods.list"},data:{goods_id:e,is_recommend:t}})}function s(e,t){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"set.new.goods.list"},data:{goods_id:e,is_new:t}})}function c(e,t){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"set.hot.goods.list"},data:{goods_id:e,is_hot:t}})}function l(e,t){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"set.shelves.goods.list"},data:{goods_id:e,status:t}})}function u(e){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.spec.list"},data:{goods_id:e}})}function p(e){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.admin.list"},data:e})}function d(e,t){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"set.goods.sort"},data:{goods_id:e,sort:t}})}function m(e){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"copy.goods.item"},data:{goods_id:e}})}function f(e){return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.attr.config"},data:{goods_id:e}})}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Object(o["a"])({url:"/v1/goods",method:"post",params:{method:"get.goods.spec.config"},data:{goods_id:e,key_to_array:t}})}},b9ad:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"f",(function(){return n})),r.d(t,"e",(function(){return i})),r.d(t,"d",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"b",(function(){return l})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return p}));var o=r("b775");function a(e){return Object(o["a"])({url:"/v1/spec",method:"post",params:{method:"add.goods.spec.item"},data:e})}function n(e){return Object(o["a"])({url:"/v1/spec",method:"post",params:{method:"set.goods.spec.item"},data:e})}function i(e){return Object(o["a"])({url:"/v1/spec",method:"post",params:{method:"get.goods.spec.page"},data:e})}function s(e){return Object(o["a"])({url:"/v1/spec",method:"post",params:{method:"get.goods.spec.list"},data:{goods_type_id:e}})}function c(){return Object(o["a"])({url:"/v1/spec",method:"post",params:{method:"get.goods.spec.all"}})}function l(e){return Object(o["a"])({url:"/v1/spec",method:"post",params:{method:"del.goods.spec.list"},data:{spec_id:e}})}function u(e,t){return Object(o["a"])({url:"/v1/spec",method:"post",params:{method:"set.goods.spec.key"},data:{spec_id:e,spec_index:t}})}function p(e,t){return Object(o["a"])({url:"/v1/spec",method:"post",params:{method:"set.goods.spec.sort"},data:{spec_id:e,sort:t}})}},e070:function(e,t,r){var o=r("d039"),a=r("5899"),n="​᠎";e.exports=function(e){return o((function(){return!!a[e]()||n[e]()!=n||a[e].name!==e}))}},fc45:function(e,t,r){"use strict";r.r(t);var o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"cs-p"},[r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{staticClass:"cs-tc clearfix",attrs:{slot:"header"},slot:"header"},[r("span",[e._v(e._s(e.stateMap[e.state]))])]),r("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[r("el-tab-pane",{attrs:{label:"基础设置",name:e.tabList[0]}},[r("el-form",{ref:"form_"+e.tabList[0],attrs:{model:e.currentForm,rules:e.rules.form_basic,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入商品名称",maxlength:"200","show-word-limit":"",clearable:!0},model:{value:e.currentForm.name,callback:function(t){e.$set(e.currentForm,"name",t)},expression:"currentForm.name"}})],1),r("el-form-item",{attrs:{label:"短名称",prop:"short_name"}},[r("el-input",{attrs:{placeholder:"可输入商品短名称，适用于移动端显示",maxlength:"50","show-word-limit":"",clearable:!0},model:{value:e.currentForm.short_name,callback:function(t){e.$set(e.currentForm,"short_name",t)},expression:"currentForm.short_name"}})],1),r("el-form-item",{attrs:{label:"促销语",prop:"product_name"}},[r("el-input",{attrs:{placeholder:"可输入商品促销语",maxlength:"100","show-word-limit":"",clearable:!0},model:{value:e.currentForm.product_name,callback:function(t){e.$set(e.currentForm,"product_name",t)},expression:"currentForm.product_name"}})],1),r("el-form-item",{attrs:{label:"分类",prop:"goods_category_id"}},[r("el-cascader",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择商品分类，试试搜索：分类",options:e.catData,props:e.cascaderProps,filterable:"",clearable:""},model:{value:e.currentForm.goods_category_id,callback:function(t){e.$set(e.currentForm,"goods_category_id",t)},expression:"currentForm.goods_category_id"}})],1),r("el-form-item",{attrs:{label:"品牌",prop:"brand_id"}},[r("el-select",{staticStyle:{width:"320px"},attrs:{placeholder:"可选择商品品牌，试试搜索：品牌",filterable:"",clearable:"",value:""},model:{value:e.currentForm.brand_id,callback:function(t){e.$set(e.currentForm,"brand_id",t)},expression:"currentForm.brand_id"}},e._l(e.brandData,(function(t){return r("el-option",{key:t.brand_id,attrs:{label:t.name,value:t.brand_id}},[r("span",{staticClass:"brand-name"},[e._v(e._s(t.name))]),r("span",{staticClass:"brand-category"},[e._v(e._s(t.category_name))])])})),1)],1),r("el-form-item",{attrs:{label:"货号",prop:"goods_code"}},[r("el-input",{attrs:{placeholder:"可输入商品货号，为空系统将自动生成",clearable:!0},model:{value:e.currentForm.goods_code,callback:function(t){e.$set(e.currentForm,"goods_code",t)},expression:"currentForm.goods_code"}})],1),r("el-form-item",{attrs:{label:"SPU",prop:"goods_spu"}},[r("el-input",{attrs:{placeholder:"可输入商品SPU",clearable:!0},model:{value:e.currentForm.goods_spu,callback:function(t){e.$set(e.currentForm,"goods_spu",t)},expression:"currentForm.goods_spu"}})],1),r("el-form-item",{attrs:{label:"SKU",prop:"goods_sku"}},[r("el-input",{attrs:{placeholder:"可输入商品SKU",clearable:!0},model:{value:e.currentForm.goods_sku,callback:function(t){e.$set(e.currentForm,"goods_sku",t)},expression:"currentForm.goods_sku"}})],1),r("el-form-item",{attrs:{label:"条码",prop:"bar_code"}},[r("el-input",{attrs:{placeholder:"可输入商品条码",clearable:!0},model:{value:e.currentForm.bar_code,callback:function(t){e.$set(e.currentForm,"bar_code",t)},expression:"currentForm.bar_code"}})],1),r("el-form-item",{attrs:{label:"计量单位",prop:"unit"}},[r("el-input",{attrs:{placeholder:"可输入商品计量单位，例如：件、个",clearable:!0},model:{value:e.currentForm.unit,callback:function(t){e.$set(e.currentForm,"unit",t)},expression:"currentForm.unit"}})],1),r("el-form-item",{attrs:{label:"计量方式",prop:"measure_type"}},[r("el-radio-group",{model:{value:e.currentForm.measure_type,callback:function(t){e.$set(e.currentForm,"measure_type",t)},expression:"currentForm.measure_type"}},[r("el-radio",{attrs:{label:0}},[e._v("重量")]),r("el-radio",{attrs:{label:1}},[e._v("计件")]),r("el-radio",{attrs:{label:2}},[e._v("体积")])],1)],1),r("el-form-item",{attrs:{label:"商品计量",prop:"measure"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:e.currentForm.measure,callback:function(t){e.$set(e.currentForm,"measure",t)},expression:"currentForm.measure"}})],1),r("el-form-item",{attrs:{label:"实际库存",prop:"store_qty"}},[r("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.currentForm.store_qty,callback:function(t){e.$set(e.currentForm,"store_qty",t)},expression:"currentForm.store_qty"}}),r("div",{staticClass:"help-block"},[r("span",[e._v("多规格商品将自动求和所有规格的库存做为实际库存")])])],1),r("el-form-item",{attrs:{label:"排序值",prop:"sort"}},[r("el-input-number",{attrs:{"controls-position":"right",min:0,max:255},model:{value:e.currentForm.sort,callback:function(t){e.$set(e.currentForm,"sort",t)},expression:"currentForm.sort"}}),r("div",{staticClass:"help-block"},[r("span",[e._v("排序值将影响商品排列的顺序，数值越小越靠前")])])],1),r("el-form-item",{attrs:{label:"上架状态",prop:"status"}},[r("el-radio-group",{model:{value:e.currentForm.status,callback:function(t){e.$set(e.currentForm,"status",t)},expression:"currentForm.status"}},[r("el-radio",{attrs:{label:1}},[e._v("出售中")]),r("el-radio",{attrs:{label:0}},[e._v("已下架")])],1)],1),r("el-form-item",{attrs:{label:"是否推荐",prop:"is_recommend"}},[r("el-radio-group",{model:{value:e.currentForm.is_recommend,callback:function(t){e.$set(e.currentForm,"is_recommend",t)},expression:"currentForm.is_recommend"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),r("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{label:"是否新品",prop:"is_new"}},[r("el-radio-group",{model:{value:e.currentForm.is_new,callback:function(t){e.$set(e.currentForm,"is_new",t)},expression:"currentForm.is_new"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),r("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),r("el-form-item",{attrs:{label:"是否热卖",prop:"is_hot"}},[r("el-radio-group",{model:{value:e.currentForm.is_hot,callback:function(t){e.$set(e.currentForm,"is_hot",t)},expression:"currentForm.is_hot"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),r("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1),r("el-divider",{attrs:{"content-position":"left"}},[e._v("购买信息")]),r("el-form-item",{attrs:{label:"市场价",prop:"market_price"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:e.currentForm.market_price,callback:function(t){e.$set(e.currentForm,"market_price",t)},expression:"currentForm.market_price"}})],1),r("el-form-item",{attrs:{label:"本店价",prop:"shop_price"}},[r("el-input-number",{attrs:{"controls-position":"right",precision:2,min:0},model:{value:e.currentForm.shop_price,callback:function(t){e.$set(e.currentForm,"shop_price",t)},expression:"currentForm.shop_price"}}),r("div",{staticClass:"help-block"},[r("span",[e._v("多规格商品按实际规格中的本店价计算")])])],1),r("el-form-item",{attrs:{label:"最少起订",prop:"least_sum"}},[r("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.currentForm.least_sum,callback:function(t){e.$set(e.currentForm,"least_sum",t)},expression:"currentForm.least_sum"}}),r("div",{staticClass:"help-block"},[r("span",[e._v("该商品最低的起订量，0为不限制")])])],1),r("el-form-item",{attrs:{label:"限购数量",prop:"purchase_sum"}},[r("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:e.currentForm.purchase_sum,callback:function(t){e.$set(e.currentForm,"purchase_sum",t)},expression:"currentForm.purchase_sum"}}),r("div",{staticClass:"help-block"},[r("span",[e._v("同个账号下最多限购该商品的数量，0为不限制")])])],1),r("el-form-item",{attrs:{label:"是否包邮",prop:"is_postage"}},[r("el-radio-group",{model:{value:e.currentForm.is_postage,callback:function(t){e.$set(e.currentForm,"is_postage",t)},expression:"currentForm.is_postage"}},[r("el-radio",{attrs:{label:1}},[e._v("是")]),r("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1)],1),r("el-tab-pane",{attrs:{label:"规格属性",name:e.tabList[1]}},[r("el-form",{ref:"form_"+e.tabList[1],attrs:{model:e.currentForm,rules:e.rules.form_type,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"商品模型",prop:"goods_type_id"}},[r("el-select",{ref:"typeSelect",staticStyle:{width:"320px"},attrs:{placeholder:"请选择商品模型，试试搜索：手机",filterable:"",value:""},on:{change:e.selectGoodsType},model:{value:e.currentForm.goods_type_id,callback:function(t){e.$set(e.currentForm,"goods_type_id",t)},expression:"currentForm.goods_type_id"}},e._l(e.typeData,(function(e){return r("el-option",{key:e.goods_type_id,attrs:{label:e.type_name,value:e.goods_type_id}})})),1)],1),r("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.typeLoading,expression:"typeLoading"}],attrs:{gutter:20}},[r("el-col",{attrs:{span:13}},[r("el-form-item",{attrs:{label:"商品规格"}},[e.currentForm.spec_config.length?r("draggable",{attrs:{list:e.currentForm.spec_config,"component-data":{props:{value:this.activeSpec}},tag:"el-collapse",handle:".spec-handle"}},e._l(e.currentForm.spec_config,(function(t,o){return r("el-collapse-item",{key:t.spec_id,staticClass:"action",attrs:{name:t.spec_id}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-sort icon-move cs-pr-10 spec-handle"}),r("div",{staticClass:"spec-more",on:{click:function(e){return e.stopPropagation()}}},[e.activeSpecMore[o]?[r("el-input",{attrs:{size:"mini"},on:{change:function(t){return e.confirmSpecName(o)}},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:t.stopPropagation()}},model:{value:t.name,callback:function(r){e.$set(t,"name",r)},expression:"item.name"}},[r("el-select",{staticClass:"type-select",attrs:{slot:"prepend"},slot:"prepend",model:{value:t.spec_type,callback:function(r){e.$set(t,"spec_type",r)},expression:"item.spec_type"}},[r("el-option",{attrs:{label:"文字",value:0}}),r("el-option",{attrs:{label:"图片",value:1}}),r("el-option",{attrs:{label:"颜色",value:2}})],1),r("el-popconfirm",{attrs:{slot:"suffix",title:"确定要执行删除操作吗?",placement:"top"},on:{onConfirm:function(t){return e.delSpec(o)}},slot:"suffix"},[r("i",{staticClass:"el-input__icon el-icon-close",attrs:{slot:"reference"},slot:"reference"})]),r("el-button",{attrs:{slot:"append",icon:"el-icon-d-arrow-left"},on:{click:function(t){return e.setSpecMoreActive(!1,o)}},slot:"append"})],1)]:[r("el-checkbox",{attrs:{indeterminate:t.is_indeterminate},on:{change:function(t){return e.handleCheckAllChange(t,o)}},model:{value:t.check_all,callback:function(r){e.$set(t,"check_all",r)},expression:"item.check_all"}},[e._v(" "+e._s(t.name)+" ")]),r("div",{staticClass:"active",on:{click:function(t){return e.setSpecMoreActive(!0,o)}}},[r("i",{staticClass:"el-input__icon el-icon-d-arrow-right",staticStyle:{color:"#909399","font-size":"12px"}})])]],2)]),r("el-checkbox-group",{staticStyle:{position:"relative"},on:{change:function(t){return e.handleCheckedCitiesChange(t,o)}},model:{value:t.check_list,callback:function(r){e.$set(t,"check_list",r)},expression:"item.check_list"}},[r("draggable",{attrs:{list:t.spec_item,handle:".item-spec-handle"}},e._l(t.spec_item,(function(a,n){return r("div",{key:n,staticClass:"spec-item"},[r("el-checkbox",{staticClass:"spec-check",attrs:{label:a.spec_item_id}}),1===t.spec_type?r("div",{staticClass:"spec-type"},[r("el-popover",{attrs:{placement:"top",trigger:"hover","close-delay":50,disabled:!a.image.length}},[a.image.length>0?r("cs-photo",{attrs:{width:80,height:80},model:{value:a.image,callback:function(t){e.$set(a,"image",t)},expression:"value.image"}}):e._e(),r("el-avatar",{staticClass:"cs-cp spec-position",attrs:{slot:"reference",shape:"square",src:e._f("getPreviewUrl")(a.image[0],"goods_image_x80"),size:27},nativeOn:{click:function(t){return e.setSpecImage(o,n,a.image)}},slot:"reference"},[r("img",{attrs:{src:"image/system/image.png",alt:""}})])],1)],1):e._e(),2===t.spec_type?r("div",{staticClass:"spec-type"},[r("el-color-picker",{staticClass:"spec-position",attrs:{size:"mini"},model:{value:a.color,callback:function(t){e.$set(a,"color",t)},expression:"value.color"}})],1):e._e(),r("el-tag",{staticClass:"cs-cm item-spec-handle",attrs:{type:"info",size:"medium",title:"双击编辑",effect:1!==t.spec_index||1!==a.is_contact?"light":"plain",closable:""},on:{close:function(t){return e.delSpecItem(o,n)}},nativeOn:{dblclick:function(t){return e.dialogSpecItemName(a.item_name,"set",o,n)}}},[e._v(e._s(a.item_name))])],1)})),0)],1),r("el-button-group",{staticClass:"spec-item active",staticStyle:{"padding-bottom":"14px"}},[r("el-button",{attrs:{title:"添加规格项",icon:"el-icon-plus",size:"mini"},on:{click:function(t){return e.dialogSpecItemName(null,"add",o,null)}}}),r("el-button",{attrs:{title:"导入规格项",icon:"el-icon-takeaway-box",size:"mini"},on:{click:function(t){return e.importSpecItem(o)}}})],1)],2)})),1):[r("div",{staticClass:"empty-data"},[e._v("暂无数据")]),r("el-divider")],e.currentForm.goods_type_id?r("div",{staticClass:"cs-mt"},[e.inputSpecVisible?r("el-input",{ref:"addSpecInput",staticStyle:{width:"97px"},attrs:{size:"small"},on:{blur:e.addSpec},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSpec(t)}},model:{value:e.inputSpecValue,callback:function(t){e.inputSpecValue=t},expression:"inputSpecValue"}}):r("el-button",{staticStyle:{height:"32px"},attrs:{icon:"el-icon-plus",size:"mini"},on:{click:e.showSpecInput}},[e._v("新增规格")])],1):e._e()],2)],1),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"商品属性"}},[e.currentForm.attr_config.length?r("draggable",{attrs:{list:e.currentForm.attr_config,"component-data":{props:{value:this.activeAttr}},tag:"el-collapse",handle:".attr-handle"}},e._l(e.currentForm.attr_config,(function(t,o){return r("el-collapse-item",{key:t.goods_attribute_id,attrs:{name:t.goods_attribute_id}},[r("template",{slot:"title"},[r("i",{staticClass:"el-icon-sort icon-move cs-pr-10 attr-handle"}),r("span",[e._v(e._s(t.attr_name))])]),r("draggable",{staticClass:"el-form el-form--label-left",attrs:{list:t.get_attribute,tag:"form",handle:".item-attr-handle"}},e._l(t.get_attribute,(function(t,a){return r("div",{key:t.goods_attribute_id,staticClass:"el-form-item attr-form"},[r("label",{staticClass:"el-form-item__label attr-label"},[r("i",{staticClass:"el-icon-sort icon-move cs-pr-10 item-attr-handle"}),r("span",{attrs:{title:t.attr_name}},[e._v(e._s(t.attr_name))])]),r("div",{staticClass:"el-form-item__content attr-content"},[0!==t.attr_input_type?r("el-select",{staticStyle:{width:"100%"},attrs:{"multiple-limit":e.inputType[t.attr_input_type].type,placeholder:e.inputType[t.attr_input_type].value,size:"small",value:"",filterable:"","allow-create":"","default-first-option":"",multiple:"",clearable:""},model:{value:t.result,callback:function(r){e.$set(t,"result",r)},expression:"value.result"}},e._l(t.attr_values,(function(e,t){return r("el-option",{key:t,attrs:{value:e}})})),1):r("div",[r("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",placeholder:e.inputType[t.attr_input_type].value,size:"small",autosize:""},model:{value:t.result,callback:function(r){e.$set(t,"result",r)},expression:"value.result"}}),r("i",{staticClass:"el-icon-copy-document attr-default",attrs:{title:"设为默认值"},on:{click:function(t){return e.setAttrDefaultValue(o,a)}}})],1)],1)])})),0)],2)})),1):[r("div",{staticClass:"empty-data"},[e._v("暂无数据")]),r("el-divider")]],2)],1)],1),r("el-form-item",{attrs:{label:"规格列表"}},[e.currentForm.spec_combo.length?r("el-table",{attrs:{data:e.currentForm.spec_combo,"header-cell-style":{background:"#fff",padding:"0"},"row-style":{height:"45px"},"span-method":e.specSpanMethod,"max-height":"500",size:"small"},on:{"cell-dblclick":e.setComboEdit}},[r("el-table-column",{attrs:{label:"商品规格",align:"center"}},e._l(e.specTable.header,(function(t,o){return r("el-table-column",{key:o,attrs:{index:o,label:t},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",{attrs:{title:t.row.key_value}},[e._v(" "+e._s(e.specTable.index[t.row.key_name[t.column.index]]["itemName"])+" ")])]}}],null,!0)})})),1),r("el-table-column",{attrs:{align:"center"}},[r("template",{slot:"header"},[r("el-tooltip",{attrs:{placement:"top",content:"正数增加，负数减少，双击单元格编辑"}},[r("i",{staticClass:"el-icon-warning-outline cs-mr-10"})]),r("el-popover",{attrs:{placement:"top-start",trigger:"manual"},model:{value:e.specBatch.visible,callback:function(t){e.$set(e.specBatch,"visible",t)},expression:"specBatch.visible"}},[r("el-input-number",{staticStyle:{width:"150px","margin-bottom":"10px"},attrs:{"controls-position":"right",size:"small",precision:"price"===e.specBatch.type?2:0,min:0},model:{value:e.specBatch.value,callback:function(t){e.$set(e.specBatch,"value",t)},expression:"specBatch.value"}}),r("div",{staticClass:"cs-tr"},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.specBatch.visible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.batchTableSpec}},[e._v("确定")])],1),r("span",{attrs:{slot:"reference"},slot:"reference"},[e._v("批量设置：")])],1),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showBatchSpec("price")}}},[e._v("本店价")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showBatchSpec("store_qty")}}},[e._v("库存")]),r("el-popover",{attrs:{placement:"top-start",trigger:"manual"},model:{value:e.specCount.visible,callback:function(t){e.$set(e.specCount,"visible",t)},expression:"specCount.visible"}},[r("el-input-number",{staticStyle:{width:"150px","margin-bottom":"10px"},attrs:{"controls-position":"right",size:"small",precision:"price"===e.specCount.type?2:0},model:{value:e.specCount.value,callback:function(t){e.$set(e.specCount,"value",t)},expression:"specCount.value"}}),r("div",{staticClass:"cs-tr"},[r("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(t){e.specCount.visible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.countTableSpec}},[e._v("确定")])],1),r("span",{staticClass:"cs-ml-10",attrs:{slot:"reference"},slot:"reference"},[e._v("批量加减：")])],1),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showCountSpec("price")}}},[e._v("本店价")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.showCountSpec("store_qty")}}},[e._v("库存")])],1),r("el-table-column",{attrs:{label:"本店价",prop:"price",width:"152"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.specTable.edit[t.$index]["price"]?r("el-input-number",{ref:"span_table_"+t.$index+"_price",attrs:{size:"mini",controls:!1,precision:2,min:0},on:{blur:function(r){e.specTable.edit[t.$index]["price"]=!1}},nativeOn:{keyup:function(r){if(!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter"))return null;e.specTable.edit[t.$index]["price"]=!1}},model:{value:t.row.price,callback:function(r){e.$set(t.row,"price",r)},expression:"scope.row.price"}}):r("div",{staticClass:"cs-cp"},[e._v(" "+e._s(e._f("getNumber")(t.row.price))+" ")])]}}])}),r("el-table-column",{attrs:{label:"库存",prop:"store_qty",width:"152"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.specTable.edit[t.$index]["store_qty"]?r("el-input-number",{ref:"span_table_"+t.$index+"_store_qty",attrs:{size:"mini",controls:!1,min:0},on:{blur:function(r){e.specTable.edit[t.$index]["store_qty"]=!1}},nativeOn:{keyup:function(r){if(!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter"))return null;e.specTable.edit[t.$index]["store_qty"]=!1}},model:{value:t.row.store_qty,callback:function(r){e.$set(t.row,"store_qty",r)},expression:"scope.row.store_qty"}}):r("div",{staticClass:"cs-cp"},[e._v(" "+e._s(t.row.store_qty)+" ")])]}}])}),r("el-table-column",{attrs:{label:"条码",prop:"bar_code",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.specTable.edit[t.$index]["bar_code"]?r("el-input",{ref:"span_table_"+t.$index+"_bar_code",attrs:{size:"mini",clearable:""},on:{blur:function(r){e.specTable.edit[t.$index]["bar_code"]=!1}},nativeOn:{keyup:function(r){if(!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter"))return null;e.specTable.edit[t.$index]["bar_code"]=!1}},model:{value:t.row.bar_code,callback:function(r){e.$set(t.row,"bar_code",r)},expression:"scope.row.bar_code"}}):r("div",{staticClass:"cs-cp"},[e._v(" "+e._s(t.row.bar_code)+" ")])]}}])}),r("el-table-column",{attrs:{label:"SKU",prop:"goods_sku",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.specTable.edit[t.$index]["goods_sku"]?r("el-input",{ref:"span_table_"+t.$index+"_goods_sku",attrs:{size:"mini",clearable:""},on:{blur:function(r){e.specTable.edit[t.$index]["goods_sku"]=!1}},nativeOn:{keyup:function(r){if(!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter"))return null;e.specTable.edit[t.$index]["goods_sku"]=!1}},model:{value:t.row.goods_sku,callback:function(r){e.$set(t.row,"goods_sku",r)},expression:"scope.row.goods_sku"}}):r("div",{staticClass:"cs-cp"},[e._v(" "+e._s(t.row.goods_sku)+" ")])]}}])})],2)],1):[r("div",{staticClass:"empty-data"},[e._v("暂无数据")]),r("el-divider")]],2)],1)],1),r("el-tab-pane",{attrs:{label:"媒体设置",name:e.tabList[2]}},[r("el-form",{ref:"form_"+e.tabList[2],attrs:{model:e.currentForm,rules:e.rules.form_photo,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"商品相册",prop:"attachment"}},[r("cs-photo",{model:{value:e.currentForm.attachment,callback:function(t){e.$set(e.currentForm,"attachment",t)},expression:"currentForm.attachment"}},[r("template",{slot:"upload"},[e.currentForm.attachment.length?e._e():r("div",{staticClass:"el-upload el-upload--picture-card",staticStyle:{"margin-bottom":"8px"},attrs:{tabindex:"0"},on:{click:function(t){return e.handleUpload(e.getAttachmentFileList,"photo","upload")}}},[r("i",{staticClass:"el-icon-plus"})])])],2),r("el-button",{attrs:{icon:"el-icon-finished",size:"small"},on:{click:function(t){return e.handleStorage(e.getAttachmentFileList,[0,2],"photo")}}},[e._v("资源选择")]),r("el-button",{attrs:{icon:"el-icon-upload2",size:"small"},on:{click:function(t){return e.handleUpload(e.getAttachmentFileList,"photo","upload")}}},[e._v("上传图片")]),r("div",{staticClass:"help-block"},[r("span",[e._v("第一张图片将作为商品主图，拖动可调整图片位置，建议图片尺寸800x800")])])],1),r("el-form-item",{attrs:{label:"视频上传",prop:"video"}},[r("cs-video",{ref:"goodsVideo",staticClass:"input-video",attrs:{mime:e.currentForm.video.mime,src:e.currentForm.video.url,poster:e.currentForm.video.cover}}),r("el-button",{attrs:{icon:"el-icon-finished",size:"small"},on:{click:function(t){return e.handleStorage(e.getVideoFileList,[2,3],"video")}}},[e._v("资源选择")]),r("el-button",{attrs:{icon:"el-icon-upload2",size:"small"},on:{click:function(t){return e.handleUpload(e.getVideoFileList,"video","upload")}}},[e._v("上传视频")]),e.currentForm.video.url?r("el-button",{attrs:{icon:"el-icon-delete",size:"small"},on:{click:e.delVideoFile}},[e._v("删除")]):e._e(),r("div",{staticClass:"help-block"},[r("span",[e._v("推荐使用mp4格式的视频，同时也支持ogg、webm等格式的视频")])])],1)],1)],1),r("el-tab-pane",{attrs:{label:"商品详情",name:e.tabList[3]}},[r("el-form",{ref:"form_"+e.tabList[3],attrs:{model:e.currentForm,rules:e.rules.form_detail,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"关键词",prop:"keywords"}},[r("el-input",{attrs:{placeholder:"可输入商品关键词，有利于SEO搜索",clearable:!0},model:{value:e.currentForm.keywords,callback:function(t){e.$set(e.currentForm,"keywords",t)},expression:"currentForm.keywords"}})],1),r("el-form-item",{attrs:{label:"页面描述",prop:"description"}},[r("el-input",{attrs:{placeholder:"可输入商品简单描述，有利于SEO搜索",clearable:!0},model:{value:e.currentForm.description,callback:function(t){e.$set(e.currentForm,"description",t)},expression:"currentForm.description"}})],1),r("el-form-item",{attrs:{label:"详情描述",prop:"content"}},[r("cs-tinymce",{ref:"tinymce",attrs:{code:"inside_content",height:450},model:{value:e.currentForm.content,callback:function(t){e.$set(e.currentForm,"content",t)},expression:"currentForm.content"}})],1)],1)],1),r("el-tab-pane",{attrs:{label:"积分结算",name:e.tabList[4]}},[r("el-form",{ref:"form_"+e.tabList[4],attrs:{model:e.currentForm,rules:e.rules.form_integral,"label-width":"80px"}},[r("el-form-item",{attrs:{label:"结算方式",prop:"integral_type"}},[r("el-radio-group",{model:{value:e.currentForm.integral_type,callback:function(t){e.$set(e.currentForm,"integral_type",t)},expression:"currentForm.integral_type"}},[r("el-radio",{attrs:{label:0}},[e._v("按百分比")]),r("el-radio",{attrs:{label:1}},[e._v("按固定值")])],1)],1),r("el-form-item",{attrs:{label:"赠送分值",prop:"give_integral"}},[r("el-input-number",{attrs:{precision:e.currentForm.integral_type?0:2,max:e.currentForm.integral_type?void 0:100,min:0,"controls-position":"right"},model:{value:e.currentForm.give_integral,callback:function(t){e.$set(e.currentForm,"give_integral",t)},expression:"currentForm.give_integral"}}),r("div",{staticClass:"help-block"},[e.currentForm.integral_type?r("span",[e._v("按赠送分值设定的值固定赠送积分，赠送分值需大于等于0")]):r("span",[e._v("按实际支付金额百分比赠送，赠送分值的范围是0 ~ 100")])])],1),r("el-form-item",{attrs:{label:"可抵扣额",prop:"is_integral"}},[r("el-input-number",{attrs:{min:0,"controls-position":"right"},model:{value:e.currentForm.is_integral,callback:function(t){e.$set(e.currentForm,"is_integral",t)},expression:"currentForm.is_integral"}}),r("div",{staticClass:"help-block"},[r("span",[e._v("商品最多允许抵扣多少积分，0为不可使用")])])],1)],1)],1)],1)],1),r("cs-storage",{ref:"storage",staticStyle:{display:"none"},attrs:{limit:e.uploadConfig.limit},on:{confirm:e.storageCallback}}),r("cs-upload",{ref:"upload",staticStyle:{display:"none"},attrs:{type:"slot",multiple:e.uploadConfig.multiple,accept:e.uploadConfig.accept,limit:e.uploadConfig.limit},on:{confirm:e.uploadCallback}}),r("page-spec",{ref:"importSpec",on:{confirm:e.importSpecData}}),r("el-dialog",{attrs:{title:"规格图片",width:"665px",visible:e.specImageVisible,"append-to-body":!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.specImageVisible=t}}},[r("cs-photo",{staticStyle:{"margin-top":"-25px"},model:{value:e.specImage,callback:function(t){e.specImage=t},expression:"specImage"}},[r("template",{slot:"upload"},[e.specImage.length?e._e():r("div",{staticClass:"empty-data"},[e._v("暂无规格图")])])],2),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("div",{staticClass:"cs-fl"},[r("el-button",{attrs:{icon:"el-icon-finished",size:"small"},on:{click:function(t){return e.handleStorage(e.getSpecImageList,[0,2],"photo")}}},[e._v("资源选择")]),r("el-button",{attrs:{icon:"el-icon-upload2",size:"small"},on:{click:function(t){return e.handleUpload(e.getSpecImageList,"photo","upload")}}},[e._v("上传图片")])],1),r("el-button",{attrs:{size:"small"},nativeOn:{click:function(t){e.specImageVisible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(t){return e.confirmSpecImage(t)}}},[e._v("确定")])],1)],1),r("el-dialog",{attrs:{title:("set"===e.specName.type?"编辑":"添加")+"规格项",visible:e.specName.visible,"append-to-body":!0,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.specName,"visible",t)}}},[r("el-form",{nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",["set"===e.specName.type?r("el-input",{ref:"specNameInput",attrs:{placeholder:"请输入规格项名称"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmSpecItemName(t)}},model:{value:e.specName.value,callback:function(t){e.$set(e.specName,"value",t)},expression:"specName.value"}}):e._e(),"add"===e.specName.type?r("el-input",{ref:"specNameInput",attrs:{placeholder:"请输入规格项名称，一行一个",type:"textarea",rows:5},model:{value:e.specName.value,callback:function(t){e.$set(e.specName,"value",t)},expression:"specName.value"}}):e._e()],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.specName.visible=!1}}},[e._v("取消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirmSpecItemName}},[e._v("确定")])],1)],1)],1)},a=[],n=(r("a4d3"),r("e01a"),r("d28b"),r("99af"),r("4de4"),r("caad"),r("c975"),r("a15b"),r("d81d"),r("4e82"),r("a434"),r("b0c0"),r("e439"),r("dbb4"),r("b64b"),r("d3b7"),r("ac1f"),r("2532"),r("3ca3"),r("1276"),r("498a"),r("159b"),r("ddb0"),r("96cf"),r("1da1")),i=r("ade3"),s=r("2909"),c=r("ca00"),l=r("60bb"),u=r("b9ad"),p=r("1610"),d=r("a2a9");function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){Object(i["a"])(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h={components:{PageSpec:function(){return r.e("chunk-5cd81ca8").then(r.bind(null,"bdb8"))},csUpload:function(){return r.e("chunk-0e5cd068").then(r.bind(null,"8422"))},csStorage:function(){return r.e("chunk-1358f166").then(r.bind(null,"8704"))},csTinymce:function(){return Promise.all([r.e("chunk-6d1d1957"),r.e("chunk-2d0cc263")]).then(r.bind(null,"4b93"))},csVideo:function(){return r.e("chunk-01cfa9e1").then(r.bind(null,"476d"))},csPhoto:function(){return r.e("chunk-79b45a71").then(r.bind(null,"aa07"))},draggable:function(){return r.e("chunk-4a49d1f9").then(r.t.bind(null,"310e",7))}},props:{loading:{default:!0},confirmLoading:{default:!1},catData:{default:function(){return[]}},brandData:{default:function(){return[]}},typeData:{default:function(){return[]}},state:{type:String,required:!0,default:"create"}},data:function(){return{activeName:"basic",tabList:["basic","type","photo","detail","integral"],stateMap:{create:"新增商品",update:"编辑商品"},inputType:[{value:"请输入自定义内容",type:1},{value:"仅单选或自定义输入",type:1},{value:"可多选或自定义输入",type:2}],storageCallback:"",uploadCallback:"",uploadConfig:{},cascaderProps:{value:"goods_category_id",label:"name",children:"children",checkStrictly:!0,emitPath:!1},currentForm:{goods_id:void 0,goods_category_id:void 0,name:"",short_name:"",product_name:"",goods_code:"",goods_spu:"",goods_sku:"",bar_code:"",brand_id:void 0,store_qty:0,market_price:0,shop_price:0,integral_type:0,give_integral:0,is_integral:0,least_sum:0,purchase_sum:0,keywords:"",description:"",content:"",attachment:[],video:{},unit:"",is_recommend:0,is_new:0,is_hot:0,goods_type_id:void 0,sort:50,status:1,attr_config:[],spec_config:[],spec_combo:[],is_postage:0,measure:0,measure_type:0},rules:{form_basic:{name:[{required:!0,message:"名称不能为空",trigger:"blur"},{max:200,message:"长度不能大于 200 个字符",trigger:"blur"}]},form_type:{},form_photo:{},form_detail:{},form_integral:{}},inputSpecValue:"",inputSpecVisible:!1,typeLoading:!1,activeAttr:[],activeSpec:[],activeSpecMore:{},specTable:[],specImage:[],specImageKey:{},specImageVisible:!1,specName:{value:"",type:"",visible:!1,parent:null,key:null},specBatch:{type:"",value:0,visible:!1},specCount:{type:"",value:0,visible:!1}}},created:function(){document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()}},filters:{getPreviewUrl:function(e,t){return e&&(e.source||e)?c["a"].getImageCodeUrl(e.source||e,t):""},getNumber:function(e){return c["a"].getNumber(e)}},watch:{"currentForm.spec_config":{handler:function(e){this._handleSpecItemData(e)},deep:!0}},methods:{handleConfirm:function(){var e=!0,t=!1,r=void 0;try{for(var o,a=this.tabList[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var n=o.value,i=!0;if(this.$refs["form_".concat(n)].validate((function(e){if(!e)return i=!1,!1})),!i)return this.activeName=n,void this.$parent.scrollTo()}}catch(s){t=!0,r=s}finally{try{e||null==a.return||a.return()}finally{if(t)throw r}}this.$emit("update:confirmLoading",!0),"create"===this.state?this.handleCreate():this.handleUpdate()},handleCreate:function(){},handleUpdate:function(){},handleStorage:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this.storageCallback=e,this.uploadConfig.limit="photo"===o?0:1,this.$nextTick((function(){t.$refs.storage.handleStorageDlg(r)}))},handleUpload:function(e,t,r){var o=this;"video"===t&&(this.uploadConfig={accept:"video/*",multiple:!1,limit:1}),"photo"===t&&(this.uploadConfig={accept:"image/*",multiple:!0,limit:0}),this.uploadCallback=e,this.$nextTick((function(){o.$refs.upload.handleUploadDlg(r)}))},getFileList:function(e,t){if(!t)return e;var r=[],o=!0,a=!1,n=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done);o=!0){var c=i.value;if("success"===c.status){var l=c.response;l&&200===l.status&&l.data&&r.push(l.data[0])}}}catch(u){a=!0,n=u}finally{try{o||null==s.return||s.return()}finally{if(a)throw n}}return r},getVideoFileList:function(e,t){var r=this;if(e.length){var o=this.getFileList(e,t),a=!0,n=!1,i=void 0;try{for(var s,c=o[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var l=s.value;if(3===l.type){this.currentForm.video={url:l.url,mime:l.mime,cover:l.cover},this.$nextTick((function(){r.$refs.goodsVideo.setSources(r.currentForm.video)}));break}}}catch(u){n=!0,i=u}finally{try{a||null==c.return||c.return()}finally{if(n)throw i}}}},delVideoFile:function(){var e=this;this.currentForm.video={},this.$nextTick((function(){e.$refs.goodsVideo.delSources()}))},getAttachmentFileList:function(e,t){var r=this;if(e.length){var o=this.getFileList(e,t);o.forEach((function(e){r.currentForm.attachment.push({name:e.name,source:e.url,url:"//"+e.url})}))}},selectGoodsType:function(e){var t=this;this.$nextTick((function(){t.$refs.typeSelect.blur()})),this.typeLoading=!0,this.activeSpecMore={};var r=[],o=!1;"create"!==this.state&&this.currentForm.goods_category_id===e&&this.$confirm("检测到您选择了该商品的原商品模型，是否加载原数据？","提示",{confirmButtonText:"是",cancelButtonText:"否",type:"warning"}).then((function(){o=!0})).catch((function(){o=!1})),r=o?[Object(d["d"])(this.currentForm.goods_id),Object(d["e"])(this.currentForm.goods_id,1)]:[Object(p["d"])(e),Object(u["d"])(e)],Promise.all(r).then((function(e){t.activeAttr=e[0].data["attr_key"]||[],t.activeSpec=e[1].data["spec_key"]||[],t.currentForm.attr_config=e[0].data["attr_config"]||[],t.currentForm.spec_combo=e[1].data["spec_combo"]||[],t.currentForm.spec_config=e[1].data["spec_config"]||[]})).finally((function(){t.typeLoading=!1}))},setAttrDefaultValue:function(e,t){var r=this.currentForm.attr_config[e]["get_attribute"][t];r&&r.attr_values[0]?this.$set(r,"result",r.attr_values[0]):this.$message.info("该属性项不存在默认值")},showSpecInput:function(){var e=this;this.inputSpecValue="",this.inputSpecVisible=!0,this.$nextTick((function(){e.$refs.addSpecInput.focus()}))},addSpec:function(){if(this.inputSpecValue){var e=-c["a"].randomLenNum(6);this.currentForm.spec_config.push({spec_id:e,goods_type_id:0,name:this.inputSpecValue,spec_index:0,spec_type:0,sort:50,spec_item:[],check_list:[]}),this.activeSpec.push(e)}this.inputSpecVisible=!1,this.inputSpecValue=""},delSpec:function(e){this.currentForm.spec_config.splice(e,1)},setSpecImage:function(e,t,r){this.specImage=Object(s["a"])(r),this.specImageKey={parent:e,key:t},this.specImageVisible=!0},getSpecImageList:function(e,t){var r=this;if(e.length){var o=this.getFileList(e,t);o.forEach((function(e){r.specImage.push({name:e.name,source:e.url,url:"//"+e.url})}))}},confirmSpecImage:function(){var e=this.specImageKey,t=e.parent,r=e.key,o=this.currentForm.spec_config[t]["spec_item"][r];this.$set(o,"image",this.specImage),this.specImageVisible=!1},delSpecItem:function(e,t){var r=this.currentForm.spec_config[e],o=r.check_list.indexOf(r.spec_item[t].spec_item_id);-1!==o&&r.check_list.splice(o,1),r.spec_item.splice(t,1),this.handleCheckedCitiesChange(r.check_list,e)},confirmSpecName:function(e){var t=this.currentForm.spec_config;this.$set(t,e,f({},t[e],{goods_type_id:0,spec_index:0,spec_id:-c["a"].randomLenNum(6)}))},setSpecMoreActive:function(e,t){this.$set(this.activeSpecMore,t,e)},dialogSpecItemName:function(e,t,r,o){var a=this;this.specName={value:e,type:t,parent:r,key:o,visible:!0},this.$nextTick((function(){a.$refs.specNameInput.select()}))},confirmSpecItemName:function(){if(this.specName.value){var e=this.specName,t=e.parent,r=e.key,o=this.currentForm.spec_config[t];if("add"===this.specName.type){var a=this.specName.value.trim().split("\n");a.forEach((function(e){o.spec_item.push({spec_item_id:-c["a"].randomLenNum(6),item_name:e,is_contact:0,sort:50,image:[],color:""})})),this.handleCheckedCitiesChange(o.check_list,t)}"set"===this.specName.type&&o.spec_item[r].item_name!==this.specName.value&&this.$set(o.spec_item,r,f({},o.spec_item[r],{is_contact:0,item_name:this.specName.value,spec_item_id:-c["a"].randomLenNum(6)})),this.specName.visible=!1}else this.specName.visible=!1},importSpecItem:function(e){var t=this;this.specName={parent:e},this.$nextTick((function(){t.$refs.importSpec.handleVisible()}))},importSpecData:function(e){if(e.spec_item){var t=this.specName.parent,r=this.currentForm.spec_config[t];e.spec_item.forEach((function(t){var o=r.spec_id===e.spec_id?1:0;r["spec_item"].push(f({},t,{is_contact:o,spec_item_id:1!==o?-c["a"].randomLenNum(6):t.spec_item_id}))})),this.handleCheckedCitiesChange(r.check_list,t)}},handleCheckAllChange:function(e,t){var r=this.currentForm.spec_config[t],o=r.spec_item.map((function(e){return e.spec_item_id}));this.$set(r,"check_list",e?o:[]),this.$set(r,"is_indeterminate",!1)},handleCheckedCitiesChange:function(e,t){var r=e.length,o=this.currentForm.spec_config[t];this.$set(o,"check_all",r===o.spec_item.length&&r>0),this.$set(o,"is_indeterminate",r>0&&r<o.spec_item.length)},showBatchSpec:function(e){this.specBatch.value=0,this.specBatch.type=e,this.specBatch.visible=!0},batchTableSpec:function(){var e=this.currentForm.spec_combo;for(var t in e)e.hasOwnProperty(t)&&(e[t][this.specBatch.type]=this.specBatch.value);this.specBatch.visible=!1},showCountSpec:function(e){this.specCount.value=0,this.specCount.type=e,this.specCount.visible=!0},countTableSpec:function(){var e=this.currentForm.spec_combo;for(var t in e)if(e.hasOwnProperty(t)){var r=e[t][this.specCount.type]+this.specCount.value;e[t][this.specCount.type]=r>=0?r:0}this.specCount.visible=!1},specSpanMethod:function(e){var t=e.column,r=e.rowIndex,o=e.columnIndex;if(void 0!==t.index&&this.specTable.column[r])return[this.specTable.column[r][o],1]},setComboEdit:function(e,t){var r=this;t.index>=0||(this.specTable.edit[e.id][t.property]=!0,this.$nextTick((function(){r.$refs["span_table_".concat(e.id,"_").concat(t.property)].focus()})))},_handleSpecItemData:Object(l["debounce"])(function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,o,a,n,i,l,u,p,d,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r={index:{},edit:{},column:[],header:[],compose:[]},t.forEach((function(e){var t={key:[],item:[],name:e.name};e.spec_item.forEach((function(o){e.check_list.includes(o.spec_item_id)&&(t.key.push(o.spec_item_id),t.item.push(o.item_name),r.index[o.spec_item_id]={specName:e.name,itemName:o.item_name})})),t.item.length>0&&(r.compose.push(t.key),r.header.push(e.name))})),o=function(e){var t="";return e.forEach((function(e){if(r.index.hasOwnProperty(e)){var o=r.index[e];t+=" ".concat(o.specName,":").concat(o.itemName)}})),t.trim()},a=[],n={},i=c["a"].descartes(r.compose),this.currentForm.spec_combo.forEach((function(e){var t=e["key_name"].sort().join("_");n[t]=e})),i.length>0)for(l=i.length,u=i[0].length||0,p=0;p<u;p++)for(d=0,m=0;m<l;m++)r.column[m]||(r.column[m]=[]),r.column[m][p]=r.column[d][p]>1?0:1,i[m+1]&&i[m][p+1]&&(i[m+1][p]===i[m][p]?r.column[d][p]++:d=m+1);i.forEach((function(e,t){var i,c=Array.isArray(e),l=c?Object(s["a"])(e).sort().join("_"):e;i=n.hasOwnProperty(l)?{price:n[l].price,store_qty:n[l].store_qty,bar_code:n[l].bar_code,goods_sku:n[l].goods_sku}:{price:0,store_qty:0,bar_code:"",goods_sku:""},i.id=t,i.key_name=c?e:[e],i.key_value=o(Object(s["a"])(i.key_name)),r.edit[t]={price:!1,store_qty:!1,bar_code:!1,goods_sku:!1},a.push(i)})),this.specTable=r,this.$set(this.currentForm,"spec_combo",a),console.log(this.specTable,a);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),300)}},_=h,b=(r("2e27"),r("2877")),g=Object(b["a"])(_,o,a,!1,null,"1b034055",null);t["default"]=g.exports}}]);