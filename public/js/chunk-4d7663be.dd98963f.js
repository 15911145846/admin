(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d7663be"],{"04e3":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"cs-p"},[n("el-form",{attrs:{inline:!0,size:"small"}},[t.auth.del?n("el-form-item",[n("el-button",{attrs:{icon:"el-icon-delete",disabled:t.loading},on:{click:function(e){return t.handleDelete(null)}}},[t._v("批量删除")])],1):t._e(),n("cs-help",{staticStyle:{"padding-bottom":"19px"},attrs:{router:t.$route.path}})],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.currentTableData},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"30"}}),n("el-table-column",{attrs:{label:"商品咨询","min-width":"550"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"goods-consult"},[n("el-image",{staticClass:"goods-image cs-cp",attrs:{src:t._f("getPreviewUrl")(e.row.get_goods.attachment),fit:"contain",lazy:""},on:{click:function(n){return t.handleView(e.row.get_goods.goods_id)}}}),n("div",{staticClass:"goods-info cs-ml"},[n("span",{staticClass:"link",attrs:{title:e.row.get_goods.name},on:{click:function(n){return t.handleView(e.row.get_goods.goods_id)}}},[t._v(t._s(e.row.get_goods.name))]),n("div",{staticClass:"consult-content"},[n("p",[n("el-tag",{attrs:{type:t.statusMap[e.row.status].type,effect:"plain",size:"mini"}},[t._v(" "+t._s(t.statusMap[e.row.status].text)+" ")]),n("span",{staticClass:"cs-pl-5",class:{title:t.auth.detail},attrs:{title:e.row.content},on:{click:function(n){return t.openConsultDetail(e.row.goods_consult_id)}}},[t._v(t._s(e.row.content))])],1),n("p",[t._v(t._s(e.row.create_time))])])])],1)]}}])}),n("el-table-column",{attrs:{"min-width":"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"user-info"},[n("p",[n("span",[t._v(t._s(e.row.get_user.username||"游客"))]),e.row.get_user.level_icon?n("el-image",{staticClass:"level-icon",attrs:{src:e.row.get_user.level_icon,fit:"fill"}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline"})])]):t._e()],1),n("p",[t._v(t._s(t.typeList[e.row.type]))])])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.auth.show||t.auth.hide?n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return t.handleShow(e.$index)}}},[t._v(t._s(e.row.is_show?"隐藏":"显示"))]):t._e(),t.auth.del?n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(n){return t.handleDelete(e.$index)}}},[t._v("删除")]):t._e()]}}])})],1)],1)},o=[],i=(n("a4d3"),n("4de4"),n("c975"),n("a434"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),a=n("ca00"),r=n("5880"),l=n("041d");function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,s)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){Object(i["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d={props:{loading:{default:!1},typeList:{default:function(){}},tableData:{default:function(){return[]}}},data:function(){return{currentTableData:[],multipleSelection:[],auth:{show:!1,hide:!1,del:!1,detail:!1},statusMap:{0:{text:"待回复",type:"warning"},1:{text:"已回复",type:"success"}}}},filters:{getPreviewUrl:function(t){return Array.isArray(t)&&t.length>0&&t[0]["source"]?a["a"].getImageCodeUrl(t[0]["source"],"goods_image_x80"):""}},watch:{tableData:{handler:function(t){this.currentTableData=t},immediate:!0}},activated:function(){this.updateChange({name:"goods-opinion-consult",source:this.currentTableData,key:"goods_consult_id"})},mounted:function(){this._validationAuth()},methods:u({},Object(r["mapActions"])("careyshop/update",["updateChange"]),{_validationAuth:function(){this.auth.show=this.$has("/goods/opinion/consult/show"),this.auth.hide=this.$has("/goods/opinion/consult/hide"),this.auth.del=this.$has("/goods/opinion/consult/del"),this.auth.detail=this.$has("/goods/opinion/consult/detail")},_getIdList:function(t){null===t&&(t=this.multipleSelection);var e=[];return Array.isArray(t)?t.forEach((function(t){e.push(t.goods_consult_id)})):e.push(this.currentTableData[t].goods_consult_id),e},handleSelectionChange:function(t){this.multipleSelection=t},handleShow:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this._getIdList(t);if(0!==o.length){if(!s){var i=this.currentTableData[t],a=i.is_show?0:1;if(i.is_show>1)return;if(0===a&&!this.auth.show)return;if(1===a&&!this.auth.hide)return;return this.$set(this.currentTableData,t,u({},i,{is_show:2})),void r(o,a,this)}this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){r(o,n,e)})).catch((function(){}))}else this.$message.error("请选择要操作的数据");function r(t,e,n){Object(l["e"])(t,e).then((function(){n.currentTableData.forEach((function(s,o){-1!==t.indexOf(s.goods_consult_id)&&n.$set(n.currentTableData,o,u({},s,{is_show:e}))})),n.$message.success("操作成功")}))}},handleDelete:function(t){var e=this,n=this._getIdList(t);0!==n.length?this.$confirm("确定要执行该操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",closeOnClickModal:!1}).then((function(){Object(l["a"])(n).then((function(){for(var t=e.currentTableData.length-1;t>=0;t--)-1!==n.indexOf(e.currentTableData[t].goods_consult_id)&&e.currentTableData.splice(t,1);e.currentTableData.length<=0&&e.$emit("refresh",!0),e.$message.success("操作成功")}))})).catch((function(){})):this.$message.error("请选择要操作的数据")},openConsultDetail:function(t){this.auth.detail&&this.$router.push({name:"goods-opinion-consult-detail",params:{goods_consult_id:t}})},handleView:function(t){this.$router.push({name:"goods-admin-view",params:{goods_id:t}})}})},h=d,f=(n("edb9"),n("2877")),g=Object(f["a"])(h,s,o,!1,null,"1fb4a606",null);e["default"]=g.exports},ad60:function(t,e,n){},edb9:function(t,e,n){"use strict";var s=n("ad60"),o=n.n(s);o.a}}]);